ALTER TABLE [dbo].[Item_Process] 
ADD  [ProcessType] [tinyint] NULL


Alter PROC [DBO].[PRO_SAVEITEM_PROCESS]    
@ITEMID INT,    
@USERID INT,    
@MASTERCOMPANYID INT,    
@PROCESSID_SEQNO VARCHAR(100),    
@MSG VARCHAR(50)  OUTPUT,    
@QUALITYID INT=0,    
@DESIGNID INT=0,  
@ProcessType tinyInt=0  
AS    
  IF @MASTERCOMPANYID<>8    
  BEGIN    
   IF @QUALITYID=0    
   BEGIN    
     SET @MSG='PLEASE SELECT QUALITY.'    
     RETURN    
   END    
  END    
 IF EXISTS(SELECT ITEMID FROM ITEM_PROCESS WHERE ITEMID=@ITEMID AND QUALITYID=@QUALITYID AND DESIGNID=@DESIGNID AND ProcessType=@ProcessType)    
 BEGIN    
  DELETE FROM ITEM_PROCESS WHERE ITEMID=@ITEMID AND QUALITYID=@QUALITYID AND DESIGNID=@DESIGNID  AND ProcessType=@ProcessType  
         INSERT INTO ITEM_PROCESS(ITEMID,USERID,MASTERCOMPANYID,QUALITYID,PROCESSID,ProcessType,DESIGNID,SEQNO)    
         SELECT @ITEMID,@USERID,@MASTERCOMPANYID,@QUALITYID,PROCESSID,@ProcessType,@DESIGNID,SEQNO FROM [DBO].[ITEM_PROCESSID_GET_STRING](@PROCESSID_SEQNO,'|',',')    
  SET @MSG='DATA UPDATED SUCCESSFULLY...'    
 END    
 ELSE    
 BEGIN    
 INSERT INTO ITEM_PROCESS(ITEMID,USERID,MASTERCOMPANYID,QUALITYID,PROCESSID,ProcessType,DESIGNID,SEQNO)    
 SELECT @ITEMID,@USERID,@MASTERCOMPANYID,@QUALITYID,PROCESSID,@ProcessType,@DESIGNID,SEQNO FROM [DBO].[ITEM_PROCESSID_GET_STRING](@PROCESSID_SEQNO,'|',',')    
 SET @MSG='DATA SAVED SUCCESSFULLY'    
 END 